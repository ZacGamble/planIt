import{j as T,u as q,g as z,c as p,J as G,k as H,a as r,o as c,b as _,E as b,d as e,t as P,w as O,B as D,x as J,F as w,D as F,e as m,A as l,p as K,i as Q,O as U,y as W}from"./vendor.eee2fd9a.js";import{_ as X,S as Y,p as f,s as v,t as g,n as u,P as S,l as Z,A as j}from"./index.67ea13c1.js";const R={components:{Sprint:Y},setup(){const s=T(),h=q(),i=z([]),t=p(()=>s.params.id),a=()=>{i.value.pop()},y=()=>new Promise((x,A)=>{for(;i.loading>0;);x()});return G(t,async o=>{o&&(i.value=[1,1,1,1],f.clearActive(),v.clearActive(),g.clearActive(),u.clearActive(),U.getOrCreateInstance(document.getElementById("projects-offcanvas")).hide(),f.getByProjectId(o).then(a),v.getByProjectId(o).then(a),g.getByProjectId(o).then(a),u.getByProjectId(o).then(a),await y())}),H(async()=>{i.value=[1,1,1,1],f.clearActive(),v.clearActive(),g.clearActive(),u.clearActive(),f.getByProjectId(s.params.id).then(a),v.getByProjectId(s.params.id).then(a),g.getByProjectId(s.params.id).then(a),u.getByProjectId(s.params.id).then(a),await y()}),{loading:i,sprints:p(()=>j.sprints),project:p(()=>j.activeProject),projects:p(()=>j.projects),account:p(()=>j.account),route:s,async deleteProject(){try{await S.confirm()&&(await f.deleteProject(s.params.id),S.toast("Project deleted","success"),h.push({name:"Home"}))}catch(o){Z.error(o.message),S.toast(o.message,"error")}}}}},n=s=>(K("data-v-0d4c72d9"),s=s(),Q(),s),$={key:1,class:"position-relative flex-grow-1 fade-in"},ee={class:"container"},te={class:"row"},se={class:"col-md-12"},oe={class:"d-flex flex-column px-3"},ae={class:"d-flex pt-3 align-items-center"},ce=n(()=>e("div",{class:"d-flex flex-column position-absolute offcanvas-trigger"},[e("p",{"data-bs-toggle":"offcanvas","data-bs-target":"#projects-offcanvas",title:"view all my projects","aria-label":"show my projects",class:"bg-gradient px-4 py-2 fw-bold fs-4 selectable text-light text-center"}," P "),e("div",{class:"text-primary bg-secondary py-3 selectable","data-bs-toggle":"modal","data-bs-target":"#account-modal"},[e("i",{class:"mdi mdi-cog px-4 py-2 fs-4",title:"edit account details","aria-label":"edit account details"})])],-1)),ne={class:"my-0 no-select"},re={class:"no-select"},ie={class:"row"},de={class:"col-md-12 mt-4"},le={class:"d-flex justify-content-between px-3 align-items-center"},pe=n(()=>e("div",{class:"div"},[e("h4",{class:"text-primary-gradient d-inline no-select"},"Sprints"),e("p",{class:"fw-bold no-select"}," Group your tasks into sprints for overarching collections for better orgainization. ")],-1)),_e={class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#create-sprint-modal"},me={key:0,class:"text-center mt-5 border text-dark"},fe=n(()=>e("h1",{class:"fw-bold"},"No sprints!",-1)),he=n(()=>e("i",{class:"mdi mdi-file-question-outline no-sprints-icon"},null,-1)),ve=[fe,he],ge=n(()=>e("h2",null,"Create Sprint",-1)),ue={class:"text-primary-gradient d-flex justify-content-between align-items-center flex-grow-1 ms-4 no-select"},je=n(()=>e("h4",null,[W("Projects"),e("i",{class:"mdi mdi-folder-heart fs-2 ms-5 mt-1"})],-1)),ye={class:"flex-column d-flex"},xe=n(()=>e("div",{class:"d-flex justify-content-between"},[e("h6",{class:"no-select"},"NAME"),e("h6",{class:"no-select"},"STARTED")],-1)),be=n(()=>e("h4",null,"Edit Account",-1));function Pe(s,h,i,t,a,y){var B,k,C,E;const o=r("Loading"),x=r("Sprint"),A=r("CreateSprintForm"),I=r("Modal"),N=r("ProjectOffcanvasDetails"),L=r("OffCanvas"),M=r("EditAccountForm");return c(),_(w,null,[t.loading.length>0?(c(),b(o,{key:0,class:"flex-grow-1"})):(c(),_("div",$,[e("div",ee,[e("div",te,[e("div",se,[e("div",oe,[e("div",ae,[ce,e("h1",ne,P((B=t.project)==null?void 0:B.name),1),O(e("i",{class:"mdi mdi-delete fs-2 ms-4 text-secondary-gradient action",onClick:h[0]||(h[0]=d=>t.deleteProject()),title:"delete project","aria-label":"delete project"},null,512),[[D,t.account.id===((k=t.project)==null?void 0:k.creatorId)]])]),e("h5",re,P((C=t.project)==null?void 0:C.description),1)])])]),e("div",ie,[e("div",de,[e("div",le,[pe,O(e("button",_e," Add Sprint ",512),[[D,t.account.id===((E=t.project)==null?void 0:E.creatorId)]])])])]),t.sprints.length>0?J("",!0):(c(),_("div",me,ve)),(c(!0),_(w,null,F(t.sprints,(d,V)=>(c(),b(x,{key:d.id,sprint:d,index:V},null,8,["sprint","index"]))),128))])])),m(I,{id:"create-sprint-modal"},{"modal-header-slot":l(()=>[ge]),"modal-body-slot":l(()=>[m(A)]),_:1}),m(L,{class:"offcanvas-start",id:"projects-offcanvas"},{"offcanvas-header-slot":l(()=>[e("div",ue,[je,e("h6",null,"for "+P(t.account.name),1)])]),"offcanvas-body-slot":l(()=>[e("div",ye,[xe,(c(!0),_(w,null,F(t.projects,d=>(c(),b(N,{key:d.id,project:d},null,8,["project"]))),128))])]),_:1}),m(I,{id:"account-modal"},{"modal-header-slot":l(()=>[be]),"modal-body-slot":l(()=>[m(M)]),_:1})],64)}var Ae=X(R,[["render",Pe],["__scopeId","data-v-0d4c72d9"]]);export{Ae as default};
